<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mice in Rhythm: Interactive Visualization</title>
  <style>
    :root {
      --bg-color: #fefaf6;
      --card-bg: #ffffff;
      --accent: #0077aa;
      --header-color: #2d2d2d;
      --text-color: #333;
      --border-color: #ddd;
    }

    /* ==== overall ================================================== */
  body{
    font-family:"Segoe UI",system-ui,sans-serif;
    background:#f6f6f8;
    color:#333;
    margin:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;          
    gap:32px;
  }

  
  main{
    width:100%;
    max-width:1000px;
    padding:0 24px 64px;
    display:flex;
    flex-direction:column;
    gap:32px;
  }

  /* ==== titke ==================================================== */
  h1{
    font-size:2.4rem;
    margin:0;
    text-align:center;
    color:#222;
  }
  h2{
    font-size:1.3rem;
    margin:0 0 .75rem;
    font-weight:600;
  }
  h3{
    font-size:1.1rem;
    margin:.3rem 0;
    color:#0077aa;
    font-weight:600;
  }

  /* ─── Header layout ─────────────────────────── */
    header{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:12px;                 
    padding-top:32px;
    }

    header .title      { font-size:3rem;  font-weight:700; color:#222; margin:0; }
    header .subtitle   { font-size:1.1rem;font-weight:600; color:#0067b9; text-align:center; margin:0 0 6px; line-height:1.4;}
    header .meta-group { text-align:center; line-height:1.5; font-size:.95rem; color:#444; }
    .meta-group strong { color:#111; }     
    .meta-group span   { display:block; }

  /* ==== section =============================================== */
  section{
    background:#fff;
    border-radius:12px;
    box-shadow:0 2px 6px rgba(0,0,0,.06);
    padding:24px;
    display:flex;
    flex-direction:column;
    gap:16px;
  }

  .visualization{position:relative;background:#f8fcff}
  .visualization::before{
    content:'';
    position:absolute;left:-6px;top:0;bottom:0;width:6px;
    background:#0077aa;border-radius:12px 0 0 12px;
  }

  /* button */
  .controls{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px}
  .btn{
    border:1px solid #6c8ab5;
    background:#f8fbff;
    border-radius:4px;
    padding:4px 10px;
    cursor:pointer;
    font-size:.84rem;
  }
  .btn:hover{background:#e8f2ff}
  .btn.active{background:#cfe2ff;font-weight:600}

  .panel svg{width:100%;height:auto;border:1px solid #ddd;border-radius:4px;background:#fff}

  /* hint */
  .scatter-hint{font-size:.8rem;color:#666;margin:4px 0;text-align:center}

  .scale-controls {
    margin-bottom: 12px;
    text-align: left;
  }
  .scale-controls .btn {
    padding: 4px 12px;
    margin: 4px;
    border: 1px solid #6c8ab5;
    border-radius: 4px;
    background: #fff;
    cursor: pointer;
  }
  .scale-controls .btn.active {
    background: #dbe8ff;
    font-weight: 600;
  }


  dialog{border:none;border-radius:10px;padding:20px;max-width:440px}
  dialog::backdrop{background:rgba(0,0,0,.35)}
  #scatter-close{float:right;background:#e33;color:#fff;border:none;border-radius:3px;padding:2px 6px;cursor:pointer}

  /* ==== footer ====================================================== */
  footer{
    width:100%;
    text-align:center;
    font-size:.8rem;
    color:#777;
    padding-top:24px;
    border-top:1px solid #ddd;
  }

  .rationale h3{
    font-size:1.05rem;
    margin:16px 0 6px;
    font-weight:700;
  }

  .rationale ul{
    list-style-type:disc;     
    margin:0 0 0 1.2rem;     
    padding:0;
  }

  .rationale li{
    margin-bottom:8px;
    line-height:1.6;
  }

  .rationale li::marker{color:#0077aa;} 

  .iv-help{
    font-size:.9rem;
    color:#444;
    margin:-4px 0 14px;   
    line-height:1.45;
  }
  .iv-help b{color:#0077aa}
  .iv-help kbd{
    font-family:inherit;
    background:#eef4ff;
    border:1px solid #b7d0ff;
    border-radius:3px;
    padding:1px 4px;
    font-size:.85em;
  }

  @media(max-width:480px){
    body{gap:24px}
    main{gap:24px;padding:0 16px 48px}
    h1{font-size:1.9rem}
    h2{font-size:1.1rem}
    .btn{font-size:.78rem}
  }

  </style>
  <style>
    body{font-family:system-ui,sans-serif;margin:24px;background:#fafafa}
    h2{margin:4px 0;font-size:18px}
    .panel{margin-bottom:56px}
    .controls{margin-bottom:6px}
    .btn{padding:4px 10px;border:1px solid #6c8ab5;border-radius:4px;background:#fff;margin-right:4px;cursor:pointer}
    .btn.active{background:#dbe8ff;font-weight:600}
    svg{border:1px solid #ddd;background:#fff}
    .axis path,.axis line{stroke:#888}
    .tooltip{position:fixed;pointer-events:none;background:#333;color:#fff;padding:4px 6px;border-radius:3px;font-size:12px;opacity:.9}
    dialog{border:none;border-radius:6px;box-shadow:0 4px 10px rgba(0,0,0,.25);padding:14px}
    dialog::backdrop{background:rgba(0,0,0,.35)}
    #scatter-close{float:right;background:#e33;color:#fff;border:none;border-radius:3px;padding:2px 6px;cursor:pointer}
  </style>
</head>

<body>
  <header>
    <h1 class="title">Mice in Rhythm</h1>
  
    <p class="subtitle">
      How do circadian rhythms and estrus cycles differently influence<br>
      activity and temperature patterns in male and female mice?
    </p >
  
    <div class="meta-group">
      <span><strong>Team Name:</strong> 404 Found</span>
      <span><strong>Team Members:</strong> Wenxi Li, Yixuan Xin, Juntong Ye, Sirui Zhang</span>
      <span><strong>UCSD Emails:</strong> wel055@ucsd.edu · yixin@ucsd.edu · juy037@ucsd.edu · siz012@ucsd.edu</span>
    </div>
  </header>

  <main>
    <section class="visualization" id="interactive-viz">
      <h2>Interactive Visualization</h2>
      <p class="iv-help">
        <b>Zoom / pan:</b> scroll&nbsp;or pinch horizontally to zoom, drag to pan<br>
        <b>Reset:</b> double‑click inside a plot<br>
        <b>Highlight:</b> use the buttons to toggle <i>Light</i>, <i>Dark</i>, or <i>Estrus</i> bands<br>
        <b>Details:</b> hover for a tooltip with exact minute &amp; mean values <br>
        <b>Scatter plot:</b> hold <kbd>Ctrl</kbd> (Win/Linux) or <kbd>⌘</kbd> (Mac) and click to open a 12‑h Temperature vs Activity view
      </p >
      
      <div id="chart-container">
        <!-- pasted from newvis.html: -->
        <div class="panel" id="activity-panel">
          <h2>Mean Activity (Female & Male)</h2>
          <div class="controls">
            <button class="btn active" data-mode="light"  data-target="activity">Highlight Light</button>
            <button class="btn"        data-mode="dark"   data-target="activity">Highlight Dark</button>
            <button class="btn"        data-mode="estrus" data-target="activity">Highlight Estrus (♀)</button>
          </div>

          <div class="scale-controls" data-target="activity">
            <button class="btn active" data-scale="minutes">Minutes</button>
            <button class="btn" data-scale="days">Days</button>
        </div>         
   
          <svg id="activity" width="960" height="420"></svg>
        </div>
        
        <div class="panel" id="temp-panel">
          <h2>Mean Core-Body Temperature (Female & Male)</h2>
          <div class="controls">
            <button class="btn active" data-mode="light"  data-target="temp">Highlight Light</button>
            <button class="btn"        data-mode="dark"   data-target="temp">Highlight Dark</button>
            <button class="btn"        data-mode="estrus" data-target="temp">Highlight Estrus (♀)</button>
          </div>
          <div class="scale-controls" data-target="temp">
            <button class="btn active" data-scale="minutes">Minutes</button>
            <button class="btn" data-scale="days">Days</button>
          </div>
          <svg id="temp" width="960" height="420"></svg>
        </div>
        
        <div id="tooltip" class="tooltip" style="display:none"></div>
        <dialog id="scatterDlg">
          <button id="scatter-close">✕</button>
          <h3 id="scatter-title" style="margin:4px 0 8px">
            Temperature vs Activity (12-h window)
          </h3>
          <svg width="420" height="420"></svg>
        </dialog>
      </div>
    </section>

    <section class="rationale">
      <h2>Design Rationale</h2>
    
      <!-- ── 1. Layout & Structure ─────────────────────── -->
      <h3>Layout and Structure</h3>
      <ul>
        <li><strong>Split by data type (2 panels)</strong> – prevents over‑plotting and keeps each metric interpretable. (We tried overlaying variables; it was too noisy.)</li>
        <li><strong>Independent scale controls</strong> – users can toggle light/dark vs estrus bands separately for clearer comparisons.</li>
      </ul>
    
      <!-- ── 2. Visual Encoding & Colour ───────────────── -->
      <h3>Visual Encodings and Color Choices</h3>
      <ul>
        <li><strong>Separate rows for female vs male</strong> – avoids mixing scales, highlights sex‑specific rhythms.</li>
        <li><strong>Color palette</strong> – warm red (♀), deep teal (♂); soft yellow / gray for light phases; muted pink for estrus windows.</li>
      </ul>
    
      <!-- ── 3. Interactivity ──────────────────────────── -->
      <h3>Interactive Visualization</h3>
      <ul>
        <li><strong>Zoom in / out:</strong> User can stretch or compress the timeline to focus on any range.</li>
        <li><strong>Dragging navigation:</strong> Drag along the x‑axis to slide the window (e.g.&nbsp;1000–2000 → 100–200) for overview vs detail.</li>
        <li><strong>Tooltip support:</strong> Hover on specific data points to reveal the precise minute and mean value for each sex—detail without clutter.</li>
        <li><strong>Control Click:</strong> Ctrl‑click (or ⌘‑click) anywhere on the chart pops up a modal scatterplot of Temperature vs Activity for that 12‑hour window (6 h before & after), showing deeper correlation.</li>
      </ul>
    
      <!-- ── 4. Alternatives ───────────────────────────── -->
      <h3>Alternatives and Reasons for Current Design</h3>
      <p>
        Our “alternatives” discussion focused on design pattern we prototyped<br>
        (1) independent small‑multiple panels for each sex and metric<br>
        (2) full‑width heat maps that encode time on the x‑axis and day on the y‑axis<br>
        (3) stacked area charts to show cumulative activity.<br>
        <br>
        Small multiples made direct comparison tedious, heat maps obscured minute‑level peaks, and stacked areas exaggerated between‑sex differences.      Usability tests with checkpoint showed that a single, shared time axis with layered line tracks, augmented by mutually‑exclusive toggle buttons and D3’s brush to enabled zoom—gave the clearest view of circadian patterns while meeting the interactive requirements, so we adopted that layout as our final choice.
      </p >
    </section>
    


    <section>
      <h2>Development Process</h2>
    </p >
    <h3>Dataset</h3>
    <ul>
      <li>
        <b>Mouse activity &amp; temperature (raw minutes)</b> &nbsp;–&nbsp;
        <a href=" "
          target="_blank" rel="noopener">
          Google Sheets (UCSD Student read‑only)
        </a >
      </li>
    </ul>


    <h3>Tool Choices</h3>
    <ul>
      <li><b>Python + Pandas</b> for initial aggregation (mean minute‑by‑minute across animals).</li>
      <li><b>D3 </b> for the interactive SVG rendering — chosen for its built‑in zoom, scales, and flexible event model.</li>
      <li><b>GitHub Projects</b> Using GitHub to track tasks, and VS Code Live Share for pair-programming sessions.</li>
    </ul>


    <h3>Iterations</h3>
    <ul>
      <li><b>v0</b>: static visualization → interactive visualization.</li>
      <li><b>v1</b>: added D3 zoom/pan, basic buttons → feedback: “pink estrus bands overlap light bands”.</li>
      <li><b>v2</b>: mutually exclusive toggles, tooltip, scatter modal (current).</li>
    </ul>

    <h3>Team Roles</h3>
    <ul>
      <li><b>Wenxi Li</b> — D3 interaction design and implement feature</li>
      <li><b>Yixuan Xin</b> — Brainstorming idea, debugging code and layout,writing the visualization and design rationale, and video recording.</li>
      <li><b>Juntong Ye</b> — designed CSS styles and HTML Page, implement feature and debugs, write-up</li>
      <li><b>Sirui Zhang</b> —</li>
    </ul>
    <p>
      The project spanned <strong>2 weeks</strong> and totalled roughly <strong>30 hours</strong>
      About 25 % of that time went into <em>data wrangling/cleaning and brainstorming</em>, 40% into
      <em>D3 interaction & visual polish</em>, 15% CSS and html, and the rest into <em>code review, debug, documentation, and
      writeup</em>.  The most time-consuming tasks were aligning estrus‑cycle annotations with the
      light-dark schedule and tuning D3's zoom + brush behaviours so that toggles remained mutually
      exclusive without visual lag.
    </p >

    </section>

    <section>
      <h2>Reflection</h2>
      <p>Through our project Mice in Rhythm, our team explored how circadian rhythms and estrus cycles differently affect the activity and core-body temperature of male and female mice. One of the most valuable things we learned was the power of interactive visualization to uncover and communicate complex behavioral patterns in time-series data. By aligning our plots with controlled light/dark cycles and marking estrus phases, we were able to highlight sex-specific physiological rhythms. It was both surprising and rewarding to see clear, periodic changes in female activity and temperature that coincided with estrus cycles—an effect largely absent in males.</p >
      <p>The most difficult part of this project was processing and averaging dense minute-level data across individuals in a meaningful and performant way. Implementing features like highlighting cycles and linking plots required careful data structuring and scale coordination. We were also surprised at how much difference even subtle changes in visualization design (like tooltips, light/dark overlays, and interactivity) made for interpretability.</p >
      <p>In the future, this visualization could be expanded with filters to view individual mice, options to overlay hormonal data (if available), or include scatterplot comparisons of temperature vs. activity across cycles. Another promising direction is annotating behavioral phases or automatically detecting estrus from temperature spikes. Overall, this project deepened our understanding of biological rhythms and the power of data visualization to tell nuanced physiological stories.      </p >
    </section>

    <footer>
      <p>© Spring 2025 | DSC 106 - UC San Diego | Team 404 Found</p >
    </footer>
  </main>

  <!-- Load D3 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Load your custom script -->
  <script src="main.js"></script>
</body>
</html>